@model AdminStatistics

<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <label class="form-label">From date:</label>
                            <input type="date" class="form-control" id="startDate">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">To date:</label>
                            <input type="date" class="form-control" id="endDate">
                        </div>
                        <div class="col-md-4 d-flex align-items-end">
                            <button class="btn btn-primary w-100" onclick="applyDateFilter()">
                                <i class="bi bi-funnel"></i> Apply Filter
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card bg-primary text-white h-100">
                <div class="card-body">
                    <h3 class="card-title h5">Total Articles</h3>
                    <p class="display-4 mb-0 fw-bold">@Model.TotalArticles</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-warning text-dark h-100">
                <div class="card-body">
                    <h3 class="card-title h5">Pending Articles</h3>
                    <p class="display-4 mb-0 fw-bold">@Model.PendingArticles</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-success text-white h-100">
                <div class="card-body">
                    <h3 class="card-title h5">Approved Articles</h3>
                    <p class="display-4 mb-0 fw-bold">@Model.ApprovedArticles</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-danger text-white h-100">
                <div class="card-body">
                    <h3 class="card-title h5">Rejected Articles</h3>
                    <p class="display-4 mb-0 fw-bold">@Model.RejectedArticles</p>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-light">
                    <h3 class="card-title h5 mb-0">Articles by Author</h3>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Author</th>
                                    <th class="text-end">Articles</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var stat in ViewBag.AuthorStats)
                                {
                                    <tr>
                                        <td>@stat.FullName</td>
                                        <td class="text-end">@stat.ArticleCount</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-6 mb-4">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-light">
                    <h3 class="card-title h5 mb-0">Articles by Category</h3>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Category</th>
                                    <th class="text-end">Articles</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var stat in ViewBag.CategoryStats)
                                {
                                    <tr>
                                        <td>@stat.Name</td>
                                        <td class="text-end">@stat.ArticleCount</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function applyDateFilter() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            
            if (!startDate || !endDate) {
                alert('Please select both start and end dates');
                return;
            }
            
            window.location.href = `/Admin/Statistics?startDate=${startDate}&endDate=${endDate}`;
        }
    </script>
} 